{"ast":null,"code":"var _jsxFileName = \"/Users/mathiasqm/Documents/GitHub/todov2/todo/src/components/Noter/AddNote.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { Timestamp, collection, addDoc, getFirestore, doc, setDoc } from \"firebase/firestore\";\nimport { uploadBytesResumable, getDownloadURL, ref } from \"firebase/storage\";\nimport { storage, db } from \"../../firebaseConfig\";\nimport { toast } from \"react-toastify\";\nimport \"./noter.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Noter(_ref) {\n  _s();\n  let {\n    title,\n    setTitle,\n    key\n  } = _ref;\n  const [formData, setFormData] = useState({\n    Titel: \"\",\n    Beskrivelse: \"\",\n    image: \"\",\n    oprettet: Timestamp.now().toDate()\n  });\n  const [progress, setProgress] = useState(0);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleImageChange = e => {\n    setFormData({\n      ...formData,\n      image: e.target.files[0]\n    });\n  };\n  const handlePublish = () => {\n    if (!formData.Beskrivelse) {\n      alert(\"Udfyld venligst alle felterne\");\n      return;\n    }\n    const storageRef = ref(storage, `/images/${Date.now()}${formData.image.name}`);\n    const uploadImage = uploadBytesResumable(storageRef, formData.image);\n    uploadImage.on(\"state_changed\", snapshot => {\n      const progressPercent = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progressPercent);\n    }, err => {\n      console.log(err);\n    }, () => {\n      setFormData({\n        Titel: \"\",\n        Beskrivelse: \"\",\n        oprettet: \"\"\n      });\n\n      // Add's todo to list\n      const noterRef = doc(db, \"minliste\", \"5v7krEiV7Q8AWA2cj5yl\");\n      const minListeRef = collection(db, \"minliste\");\n      const listeId = String(key);\n      getDownloadURL(uploadImage.snapshot.ref).then(url => {\n        setDoc(doc(db, \"Arbejde\", formData.Beskrivelse), {\n          Titel: formData.Titel,\n          Beskrivelse: formData.Beskrivelse,\n          imageUrl: url,\n          oprettet: Timestamp.now().toDate()\n        }).then(() => {\n          toast(\"Todo er tilføjet\", {\n            type: \"success\"\n          });\n          setProgress(0);\n        }).catch(err => {\n          toast(\"Error adding article\", {\n            type: \"error\"\n          });\n        });\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lavtodo\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      name: \"Beskrivelse\",\n      className: \"form-control\",\n      value: formData.Beskrivelse,\n      placeholder: \"Hvad vil du gerne have gjort?\",\n      onChange: e => handleChange(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pick-day\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addbutton\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: handlePublish,\n          children: \"Tilf\\xF8j\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(Noter, \"uzI8Nx52AdA+xc96BG/UPYAUBQw=\");\n_c = Noter;\nvar _c;\n$RefreshReg$(_c, \"Noter\");","map":{"version":3,"names":["React","useState","Timestamp","collection","addDoc","getFirestore","doc","setDoc","uploadBytesResumable","getDownloadURL","ref","storage","db","toast","Noter","title","setTitle","key","formData","setFormData","Titel","Beskrivelse","image","oprettet","now","toDate","progress","setProgress","handleChange","e","target","name","value","handleImageChange","files","handlePublish","alert","storageRef","Date","uploadImage","on","snapshot","progressPercent","Math","round","bytesTransferred","totalBytes","err","console","log","noterRef","minListeRef","listeId","String","then","url","imageUrl","type","catch"],"sources":["/Users/mathiasqm/Documents/GitHub/todov2/todo/src/components/Noter/AddNote.js"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { Timestamp, collection, addDoc, getFirestore, doc, setDoc } from \"firebase/firestore\";\nimport { uploadBytesResumable, getDownloadURL, ref } from \"firebase/storage\";\nimport { storage, db } from \"../../firebaseConfig\";\nimport { toast } from \"react-toastify\";\n\nimport \"./noter.css\";\n\nexport default function Noter({title, setTitle, key}) {\n\n\n  const [formData, setFormData] = useState({\n    Titel: \"\",\n    Beskrivelse: \"\",\n    image: \"\",\n    oprettet: Timestamp.now().toDate(),\n  }, );\n\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleImageChange = (e) => {\n    setFormData({ ...formData, image: e.target.files[0] });\n  };\n\n  const handlePublish = () => {\n    if (!formData.Beskrivelse) {\n      alert(\"Udfyld venligst alle felterne\");\n      return;\n    }\n    const storageRef = ref(\n      storage,\n      `/images/${Date.now()}${formData.image.name}`\n    );\n\n    const uploadImage = uploadBytesResumable(storageRef, formData.image);\n\n    uploadImage.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progressPercent = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progressPercent);\n      },\n      (err) => {\n        console.log(err);\n      },\n      () => {\n        setFormData({\n          Titel: \"\",\n          Beskrivelse: \"\",\n          oprettet: \"\"\n        });\n        \n\n        // Add's todo to list\n        const noterRef = doc(db, \"minliste\", \"5v7krEiV7Q8AWA2cj5yl\" );\n        const minListeRef = collection(db, \"minliste\");\n        const listeId = String(key);\n\n        getDownloadURL(uploadImage.snapshot.ref).then((url) => {\n          setDoc(doc(db, \"Arbejde\", formData.Beskrivelse), {\n            Titel: formData.Titel,\n            Beskrivelse: formData.Beskrivelse,\n            imageUrl: url,\n            oprettet: Timestamp.now().toDate(),\n          })\n            .then(() => {\n              toast(\"Todo er tilføjet\", { type: \"success\" });\n              setProgress(0);\n            })\n            .catch((err) => {\n              toast(\"Error adding article\", { type: \"error\" });\n            });\n        });\n      }\n    );\n  };\n\n  return (\n      \n    <div className=\"lavtodo\">\n      \n      {/* beskrivelse */}\n      <textarea\n        name=\"Beskrivelse\"\n        className=\"form-control\"\n        value={formData.Beskrivelse}\n        placeholder=\"Hvad vil du gerne have gjort?\"\n        onChange={(e) => handleChange(e)}\n      />\n\n      <div className=\"pick-day\">\n      <div className=\"addbutton\">\n        <button className=\"btn-primary\" onClick={handlePublish}>\n          Tilføj\n        </button>\n      </div>\n    </div>\n    \n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,SAAS,EAAEC,UAAU,EAAEC,MAAM,EAAEC,YAAY,EAAEC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAC7F,SAASC,oBAAoB,EAAEC,cAAc,EAAEC,GAAG,QAAQ,kBAAkB;AAC5E,SAASC,OAAO,EAAEC,EAAE,QAAQ,sBAAsB;AAClD,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,aAAa;AAAC;AAErB,eAAe,SAASC,KAAK,OAAyB;EAAA;EAAA,IAAxB;IAACC,KAAK;IAAEC,QAAQ;IAAEC;EAAG,CAAC;EAGlD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC;IACvCmB,KAAK,EAAE,EAAE;IACTC,WAAW,EAAE,EAAE;IACfC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAErB,SAAS,CAACsB,GAAG,EAAE,CAACC,MAAM;EAClC,CAAC,CAAG;EAEJ,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC,CAAC,CAAC;EAE3C,MAAM2B,YAAY,GAAIC,CAAC,IAAK;IAC1BV,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAE,CAACW,CAAC,CAACC,MAAM,CAACC,IAAI,GAAGF,CAAC,CAACC,MAAM,CAACE;IAAM,CAAC,CAAC;EAC/D,CAAC;EAED,MAAMC,iBAAiB,GAAIJ,CAAC,IAAK;IAC/BV,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAEI,KAAK,EAAEO,CAAC,CAACC,MAAM,CAACI,KAAK,CAAC,CAAC;IAAE,CAAC,CAAC;EACxD,CAAC;EAED,MAAMC,aAAa,GAAG,MAAM;IAC1B,IAAI,CAACjB,QAAQ,CAACG,WAAW,EAAE;MACzBe,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;IACA,MAAMC,UAAU,GAAG3B,GAAG,CACpBC,OAAO,EACN,WAAU2B,IAAI,CAACd,GAAG,EAAG,GAAEN,QAAQ,CAACI,KAAK,CAACS,IAAK,EAAC,CAC9C;IAED,MAAMQ,WAAW,GAAG/B,oBAAoB,CAAC6B,UAAU,EAAEnB,QAAQ,CAACI,KAAK,CAAC;IAEpEiB,WAAW,CAACC,EAAE,CACZ,eAAe,EACdC,QAAQ,IAAK;MACZ,MAAMC,eAAe,GAAGC,IAAI,CAACC,KAAK,CAC/BH,QAAQ,CAACI,gBAAgB,GAAGJ,QAAQ,CAACK,UAAU,GAAI,GAAG,CACxD;MACDnB,WAAW,CAACe,eAAe,CAAC;IAC9B,CAAC,EACAK,GAAG,IAAK;MACPC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,EACD,MAAM;MACJ5B,WAAW,CAAC;QACVC,KAAK,EAAE,EAAE;QACTC,WAAW,EAAE,EAAE;QACfE,QAAQ,EAAE;MACZ,CAAC,CAAC;;MAGF;MACA,MAAM2B,QAAQ,GAAG5C,GAAG,CAACM,EAAE,EAAE,UAAU,EAAE,sBAAsB,CAAE;MAC7D,MAAMuC,WAAW,GAAGhD,UAAU,CAACS,EAAE,EAAE,UAAU,CAAC;MAC9C,MAAMwC,OAAO,GAAGC,MAAM,CAACpC,GAAG,CAAC;MAE3BR,cAAc,CAAC8B,WAAW,CAACE,QAAQ,CAAC/B,GAAG,CAAC,CAAC4C,IAAI,CAAEC,GAAG,IAAK;QACrDhD,MAAM,CAACD,GAAG,CAACM,EAAE,EAAE,SAAS,EAAEM,QAAQ,CAACG,WAAW,CAAC,EAAE;UAC/CD,KAAK,EAAEF,QAAQ,CAACE,KAAK;UACrBC,WAAW,EAAEH,QAAQ,CAACG,WAAW;UACjCmC,QAAQ,EAAED,GAAG;UACbhC,QAAQ,EAAErB,SAAS,CAACsB,GAAG,EAAE,CAACC,MAAM;QAClC,CAAC,CAAC,CACC6B,IAAI,CAAC,MAAM;UACVzC,KAAK,CAAC,kBAAkB,EAAE;YAAE4C,IAAI,EAAE;UAAU,CAAC,CAAC;UAC9C9B,WAAW,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CACD+B,KAAK,CAAEX,GAAG,IAAK;UACdlC,KAAK,CAAC,sBAAsB,EAAE;YAAE4C,IAAI,EAAE;UAAQ,CAAC,CAAC;QAClD,CAAC,CAAC;MACN,CAAC,CAAC;IACJ,CAAC,CACF;EACH,CAAC;EAED,oBAEE;IAAK,SAAS,EAAC,SAAS;IAAA,wBAGtB;MACE,IAAI,EAAC,aAAa;MAClB,SAAS,EAAC,cAAc;MACxB,KAAK,EAAEvC,QAAQ,CAACG,WAAY;MAC5B,WAAW,EAAC,+BAA+B;MAC3C,QAAQ,EAAGQ,CAAC,IAAKD,YAAY,CAACC,CAAC;IAAE;MAAA;MAAA;MAAA;IAAA,QACjC,eAEF;MAAK,SAAS,EAAC,UAAU;MAAA,uBACzB;QAAK,SAAS,EAAC,WAAW;QAAA,uBACxB;UAAQ,SAAS,EAAC,aAAa;UAAC,OAAO,EAAEM,aAAc;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAE9C;QAAA;QAAA;QAAA;MAAA;IACL;MAAA;MAAA;MAAA;IAAA,QACF;EAAA;IAAA;IAAA;IAAA;EAAA,QAEA;AAEV;AAAC,GAlGuBrB,KAAK;AAAA,KAALA,KAAK;AAAA;AAAA"},"metadata":{},"sourceType":"module"}